jQuery(function(e){var t,a,l,n=e("#yith-wcbep-my-page-wrapper"),s="yes"==n.data("is-vendor"),c=n.data("wpml-current-language"),r=e(".yith_webep_attr_chosen"),o=e("#yith-wcbep-resize-table"),h=e(".yith-wcbep-chosen"),d=e("#yith-wcbep-custom-input-categories"),p=e("#yith-wcbep-custom-input"),f=e("#yith-wcbep-custom-input-textarea"),u=e("#yith-wcbep-custom-input-textarea-button-save"),b=e("#yith-wcbep-custom-input-textarea-button-cancel"),v=e("#yith-wcbep-custom-input-date"),g=e("#yith-wcbep-custom-input-image"),w=e("#yith-wcbep-custom-input-image-button-save"),y=e("#yith-wcbep-custom-input-image-button-cancel"),m=e("#yith-wcbep-custom-input-image-button-remove"),_=e("#yith-wcbep-custom-input-gallery"),k=e("#yith-wcbep-custom-input-gallery-button-cancel"),x=e("#yith-wcbep-custom-input-gallery-button-save"),O=e("#yith-wcbep-custom-input-gallery-button-add"),S=e("#yith-wcbep-custom-input-downloadable-files"),j=e("#yith-wcbep-custom-input-downloadable-files-button-cancel"),C=e("#yith-wcbep-custom-input-downloadable-files-button-save"),I=e("#yith-wcbep-custom-input-downloadable-files-button-add"),N=e("#yith-wcbep-custom-input-downloadable-files-default-row tbody"),R=e("#yith-wcbep-custom-input-downloadable-files-table"),F=e("#yith-wcbep-message-not-editable"),J=null,T=null,q=[],P=[],D=[],z=[],E=e("#yith-wcbep-get-products"),A=e("#yith-wcbep-filter-form"),H=e("#yith-wcbep-title-filter-select"),U=e("#yith-wcbep-title-filter-value"),W=e("#yith-wcbep-sku-filter-select"),M=e("#yith-wcbep-sku-filter-value"),B=e("#yith-wcbep-categories-filter"),Q=e("#yith-wcbep-brands-filter"),X=e(".yith-wcbep-custom-taxonomy-filter"),Y=e("#yith-wcbep-tags-filter"),G=e("#yith-wcbep-regular-price-filter-select"),K=e("#yith-wcbep-regular-price-filter-value"),L=e("#yith-wcbep-sale-price-filter-select"),V=e("#yith-wcbep-sale-price-filter-value"),Z=e("#yith-wcbep-weight-filter-select"),$=e("#yith-wcbep-weight-filter-value"),ee=e("#yith-wcbep-stock-qty-filter-select"),te=e("#yith-wcbep-stock-qty-filter-value"),ie=e("#yith-wcbep-stock-status-filter-select"),ae=e("#yith-wcbep-status-filter-select"),le=e("#yith-wcbep-per-page-filter"),ne=e("#yith-wcbep-product-type-filter-select"),se=e("#yith-wcbep-show-variations-filter"),ce=e("#yith-wcbep-reset-filters"),re=e("#yith-wcbep-check-by-filters"),oe=e("#yith-wcbep-table-wrap").find(".wp-list-table").first(),he=e("#yith-wcbep-bulk-edit-btn"),de=e("#yith-wcbep-bulk-editor"),pe=e("#yith-wcbep-bulk-apply"),fe=e("#yith-wcbep-categories-bulk-select"),ue=e("#yith-wcbep-categories-bulk-chosen"),be=e(".yith-wcbep-attributes-bulk-chosen"),ve=e(".yith-wcbep-attributes-visible-bulk-select"),ge=e(".yith-wcbep-attributes-used-for-variation-bulk-select"),we=e("#yith-wcbep-tags-bulk-select"),ye=e("#yith-wcbep-tags-bulk-value"),me=e("#yith-wcbep-tags-bulk-replace"),_e=e("#yith-wcbep-save"),ke=e("#yith-wcbep-cols-settings-btn"),xe=e("#yith-wcbep-columns-settings-wrapper"),Oe=e("#yith-wcbep-columns-settings-select-all"),Se=e("#yith-wcbep-columns-settings-unselect-all"),je=e("#yith-wcbep-importer-wrapper"),Ce=e("#yith-wcbep-importer-cancel"),Ie=e("#yith-wcbep-importer-save"),Ne=e("#yith-wcbep-importer-upload-url"),Re=e("#yith-wcbep-importer-upload-btn"),Fe=[],Je=[],Te=e("#yith-wcbep-undo"),qe=e("#yith-wcbep-redo"),Pe=e("#yith-wcbep-new"),De=e("#yith-wcbep-delete"),ze=e("#yith-wcbep-export"),Ee=e("#yith-wcbep-import"),Ae=(e("#yith-wcbep-imported-file"),e("#yith-wcbep-export-form")),He=e("#yith-wcbep-export-form-btn"),Ue=e("#yith-wcbep-export-ids"),We=e("#yith-wcbep-message"),Me=oe.width(),Be=e(".yith-wcbep-close"),Qe=Me*o.width()/100,Xe={message:null,overlayCSS:{background:"#000 url()",opacity:.6},ignoreIfBlocked:!0},Ye={message:null,overlayCSS:{background:"#000 url()",opacity:.6,cursor:"default"}},Ge=function(t,i){if(i==S){var n=R.find("tr"),s="";return R.find("tr").each(function(){var t=e(this).find("td.file_name input").val(),i=e(this).find("td.file_url input").val();s+='<input type="hidden" class="yith-wcbep-hidden-downloadable-file" data-file-name="'+t+'" data-file-url="'+i+'" />'}),n.length>0&&(n.length>1?s+=n.length+" "+ajax_object.files:s+=n.length+" "+ajax_object.file),void t.html(s)}if(i==_){var c="";return i.find("li.image img").each(function(){c+='<img data-image-id="'+e(this).data("image-id")+'" src="'+e(this).attr("src")+'" />'}),void t.find(".yith-wcbep-table-image-gallery").html(c)}if(i!=d&&i!=a&&i!=l)if(i!=f)if(i!=v){if(i==g){var r=i.find("img").attr("src")?i.find("img").attr("src"):"",o=i.find(".yith-wcbep-hidden-image-value").val();return t.find("img").attr("src",r),void t.find(".yith-wcbep-hidden-image-value").val(o)}var h=i.find("input");if(t.hasClasses(["regular_price","sale_price","weight","height","width","length","stock_quantity","download_limit","download_expiry","menu_order"],"OR")){var p=h.val();isNaN(p)?""==p&&t.html(""):t.html(p)}else{if(!!t.find(".yith-wcbep-editable-checkbox").length)return;t.html(h.val())}}else t.html(i.find("input").val());else t.text(i.find("textarea").val());else{var u=null!=i.find("select.chosen").val()?i.find("select.chosen").val():"";t.find(".yith-wcbep-select-selected").val("["+u+"]");var b=i.find("select"),w="";if(""!=u&&"object"!=typeof u&&(u=[u]),""!=u)for(var y in u)w+=b.find("option[value="+u[y]+"]").html(),y<u.length-1&&(w+=", ");if(t.find(".yith-wcbep-select-values").html(w),i==a)if(-1==t.find(".yith-wcbep-attr-is-visible").val()||-1==t.find(".yith-wcbep-attr-is-variation").val());else{var m=i.find(".yith-wcbep-custom-input-attributes-visible").is(":checked")?"1":"0",k=i.find(".yith-wcbep-custom-input-attributes-variations").is(":checked")?"1":"0";t.find(".yith-wcbep-attr-is-visible").val(m),t.find(".yith-wcbep-attr-is-variation").val(k)}}},Ke=function(e){var i=!1;p.is(":visible")&&(i=!0,e&&p.hide(),J&&(Ge(J,p),p.val(""),J=null)),d.is(":visible")&&(i=!0,e&&d.hide(),J&&(Ge(J,d),J=null)),f.is(":visible")&&(i=!0,e&&f.hide(),J&&(J=null)),v.is(":visible")&&(i=!0,e&&v.hide(),J&&(Ge(J,v),J=null)),a&&a.is(":visible")&&(i=!0,e&&a.hide(),J&&(Ge(J,a),J=null)),g.is(":visible")&&(i=!0,e&&g.hide(),J&&(J=null)),_.is(":visible")&&(i=!0,e&&_.hide(),J&&(J=null)),S.is(":visible")&&(i=!0,e&&S.hide(),J&&(J=null)),l&&l.is(":visible")&&(i=!0,e&&l.hide(),J&&(Ge(J,l),J=null)),F.is(":visible")&&e?F.hide():t&&i&&(Le(),t=null)},Le=function(){var e=t.data("y"),i=t.data("x")+1;t.html()!=q[e][i]?t.addClass("yith-wcbep-table-modified-td"):t.removeClass("yith-wcbep-table-modified-td"),rt()},Ve=[],Ze=function(t){var i=0;Ve=[],Je=[],oe.find("tbody#the-list > tr").each(function(){var t=e(this).children("td"),a=!1;if(t.length>0){var l=1,n=[];n.push(0),t.each(function(){e(this).html()!=q[i][l]?(e(this).addClass("yith-wcbep-table-modified-td"),a=!0,n.push(1)):(e(this).removeClass("yith-wcbep-table-modified-td"),n.push(0)),l++}),Ve.push(n),a&&Je.push(i),i++}}),t&&rt()},$e=function(){_.find(".yith-wcbep-image-gallery").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#aaa")},stop:function(e,t){t.item.removeAttr("style")},update:function(){e("#yith-wcbep-custom-input-gallery-container ul li.image").css("cursor","default")}}),_.find("span.delete").on("click",function(){e(this).closest("li.image").remove()})},et=function(){S.find(".delete").on("click",function(){e(this).closest("tr").remove()}),S.find(".yith-wcbep-custom-input-downloadable-files-choose-file").on("click",function(){var t=e(this).closest("tr"),i=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var e=i.state().get("selection").first().toJSON().url;t.find("td.file_url input").val(e)})}),R.sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65})},tt=function(){var e=150*oe.children("thead").find("th:visible").length,t=100*(e=Me>e?Me:e)/Me;o.css({width:t+"px"}),o.trigger("resize"),oe.css({height:"auto",width:e})},it=function(){tt(),ct=[],st=0,oe=e("#yith-wcbep-table-wrap .wp-list-table"),at(),t=null,oe.on("click","th#cb input",function(){var t=oe.find("tbody#the-list th.check-column > input");e(this).is(":checked")?t.attr("checked",!0):t.attr("checked",!1)}),oe.on("click","td.stock_status, td.manage_stock, td.sold_individually, td.featured, td.virtual, td.downloadable, td.enable_reviews",function(){var i=e(this).find("input.yith-wcbep-editable-checkbox"),a=e(this).find("input.yith-wcbep-hidden-checkbox-value");i.is(":checked")?a.val("1"):a.val("0"),J=e(this).closest("td"),t=J,Le()});extra_class.select.length>0&&extra_class.select;oe.on("change","td .yith-wcbep-editable-select",function(){var i=e(this);e(this).closest("td").find("input.yith-wcbep-hidden-select-value").val(i.val()),J=e(this).closest("td"),t=J,Le()});var i=extra_class.text,n=["title","regular_price","sale_price","sku","tags","weight","height","width","length","stock_quantity","download_limit","download_expiry","menu_order","button_text","product_url","slug","up_sells","cross_sells"];n=n.concat(i),oe.on("click","td",function(i){if(i.stopPropagation(),Ke(!0),J=e(i.target),t=e(i.target).closest("td"),T=e(i.target),J.is("td")||(J=J.closest("td")),J.closest("td").find(".not_editable").length>0||J.closest("td").find(".not_editable_for_new").length>0){J.closest("td").find(".not_editable").length>0?F.html(ajax_object.not_editable_variations):J.closest("td").find(".not_editable_for_new").length>0&&F.html(ajax_object.not_editable_new_product),F.show();var s=i.pageY-55-10,c=i.pageX-107.5;F.offset({top:s,left:c})}else if(J.hasClasses(n,"OR")){y=p.find("input");p.width(J.width()),p.height(J.height()),p.show(),p.offset(J.offset()),y.width(J.width()),y.height(J.height()),y.val(J.html()),y.trigger("focus").select()}else if(e(i.target).closest("td").hasClasses(["categories"],"OR"))J=e(i.target).closest("td"),T=e(i.target).closest("td"),p.prop("contenteditable","false"),d.width(J.width()),d.height(J.height()),d.find(".chosen").val(e.parseJSON(J.find(".yith-wcbep-select-selected").val())),d.find(".chosen").trigger("change"),d.show(),d.offset(J.offset()),d.find(".chosen").select2("open");else if(J.hasClasses(["description","shortdesc","purchase_note"],"OR"))f.find("textarea").val(J.text()),f.show(),f.offset(J.offset());else if(J.hasClasses(["image"],"OR")||e(i.target).closest("td").hasClasses(["image"],"OR")){var r=(J=e(i.target).closest("td")).find("img").attr("src")?J.find("img").attr("src"):"",o=J.find(".yith-wcbep-hidden-image-value").val();g.find("img").attr("src",r),g.find(".yith-wcbep-hidden-image-value").val(o),g.show(),g.offset(J.offset())}else if(J.hasClasses(["image_gallery"],"OR")||e(i.target).closest("td").hasClasses(["image_gallery"],"OR")){var h=(J=e(i.target).closest("td")).find("img"),u='<ul class="yith-wcbep-image-gallery">';h.length>0&&h.each(function(){u+='<li class="image"><span class="delete">x</span><img data-image-id="'+e(this).data("image-id")+'" src="'+e(this).attr("src")+'"></li>'}),u+="</ul>",_.find("#yith-wcbep-custom-input-gallery-container").html(u),$e(),_.show(),_.offset(J.offset())}else if(J.hasClasses(["downloadable_files"],"OR")||e(i.target).closest("td").hasClasses(["downloadable_files"],"OR")){J=e(i.target).closest("td"),R.html("");var b=J.find(".yith-wcbep-hidden-downloadable-file"),w=e(N.html());b.length>0&&(b.each(function(){var t=w.clone(),i=e(this);t.find("td.file_name input").val(i.data("file-name")),t.find("td.file_url input").val(i.data("file-url")),R.append(t)}),et()),S.show(),S.offset({top:J.offset().top,left:J.offset().left-S.width()/2})}else if(J.hasClasses(["date","sale_price_from","sale_price_to"],"OR")){var y=v.find("input");v.width(J.width()),v.height(J.height()),y.width(J.width()),y.height(J.height()),y.val(J.html()),v.show(),v.offset(J.offset()),y.datepicker({dateFormat:"yy/mm/dd"}),y.trigger("focus")}else if(J.hasClasses(extra_obj.chosen,"OR")){var m="yith-wcbep-custom-input-"+J.prop("class").split(" ")[0];(l=e("#"+m)).width(J.width()),l.height(J.height()),l.find(".chosen").val(e.parseJSON(J.find(".yith-wcbep-select-selected").val())),l.find(".chosen").trigger("change"),l.show(),l.offset(J.offset()),l.find(".chosen").select2("open")}else if(e(i.target).closest("td").is('[class^="attr_"]')){var k=(J=e(i.target).closest("td")).prop("class").split(" ")[0].replace("attr_","");if(a=e("#yith-wcbep-custom-input-attributes-"+k),T=e(i.target).closest("td"),a.width("240px"),-1==J.find(".yith-wcbep-attr-is-visible").val()||-1==J.find(".yith-wcbep-attr-is-variation").val())a.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").hide(),(x=a.find(".chosen")).prop("multiple")&&(x.val("").trigger("change"),x.removeAttr("multiple").select2({width:"100%"}).append(e("<option></option>").attr("value","").text(ajax_object.leave_empty))),x.val(e.parseJSON(J.find(".yith-wcbep-select-selected").val())),x.trigger("change");else{a.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").show();var x=a.find(".chosen");x.prop("multiple")||(x.val("").trigger("change"),x.attr("multiple",!0).select2({width:"100%"}),x.find('option[value=""]').remove()),1==J.find(".yith-wcbep-attr-is-visible").val()?a.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!0):a.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!1),1==J.find(".yith-wcbep-attr-is-variation").val()?a.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!0):a.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!1),x.val(e.parseJSON(J.find(".yith-wcbep-select-selected").val())),x.trigger("change")}a.show(),a.offset(J.offset())}}),rt()},at=function(){q=[],z=[];var t=0;oe.find("tbody#the-list > tr").each(function(){var i=e(this).children("td"),a=[e(this).children("th")];if(i.length>0){var l=[!1],n=0;i.each(function(){e(this).data("y",t),e(this).data("x",n),l.push(e(this).html()),a.push(e(this)),n++}),q.push(l),z.push(a)}t++}),D=pt()},lt=function(){var t=[];return oe.find("tbody#the-list > tr").each(function(){var i=e(this).children("td");if(i.length>0){var a=[!1];i.each(function(){var t=e(this).find(".yith-wcbep-select-selected"),i=e(this).find("input.yith-wcbep-hidden-checkbox-value"),l=e(this).find("input.yith-wcbep-hidden-select-value"),n=e(this).find("input.yith-wcbep-hidden-image-value"),s=e(this).find(".yith-wcbep-table-image-gallery"),c=e(this).find(".yith-wcbep-hidden-downloadable-file"),r=e(this).find(".not_editable");if(t.length>0){var o=[],h=e(this).find("input.yith-wcbep-attr-is-visible"),d=e(this).find("input.yith-wcbep-attr-is-variation");h.length>0&&d.length>0?(o.push(h.val()),o.push(d.val()),o.push(e.parseJSON(t.val())),a.push(o)):a.push(t.val())}else if(i.length>0)a.push(i.val());else if(l.length>0)a.push(l.val());else if(n.length>0)a.push(n.val());else if(s.length>0){var p=[];e(this).find("img").each(function(){p.push(e(this).data("image-id"))}),p=p.length>0?p:"",a.push(p)}else if(c.length>0){var f=[];c.each(function(){f.push([e(this).data("file-name"),e(this).data("file-url")])}),f=f.length>0?f:"",a.push(f)}else r.length>0?e(this).is(".prod_type")?a.push("variation"):a.push(r.html()):e(this).hasClasses(["description","shortdesc","purchase_note"],"OR")?a.push(e(this).text()):a.push(e(this).html())}),t.push(a)}}),t},nt=function(){var t=[];return oe.find("tbody#the-list > tr").each(function(){var i=e(this).children("td.ID");i.length>0&&i.each(function(){t.push(parseInt(e(this).html()))})}),t},st=0,ct=[],rt=function(){var t=[];return oe.find("tbody#the-list > tr").each(function(){var i=e(this).children("td");if(i.length>0){var a=[];i.each(function(){a.push(e(this).html())}),t.push(a)}}),ct[st-1]?ct[st-1].toString()!=t.toString()&&(ct[st]=t,st++,ct=ct.slice(0,st)):(ct[st]=t,st++),t},ot=function(t){var i=0;oe.find("tbody#the-list > tr").each(function(){var a=e(this).children("td");if(a.length>0){var l=0;a.each(function(){e(this).html(t[i][l]);var a=e(this).find(".yith-wcbep-editable-select"),n=e(this).find(".yith-wcbep-editable-checkbox"),s="";a.length>0?(s=e(this).find(".yith-wcbep-hidden-select-value").val(),a.val(s)):n.length>0&&(s=e(this).find(".yith-wcbep-hidden-checkbox-value").val(),n.prop("checked",1==s)),l++})}i++}),Ze()},ht=function(){st>1&&ot(ct[--st-1])},dt=function(){ct[st]&&(ot(ct[st]),st++)},pt=function(){var t=[];return oe.children("thead").children("tr").children("th").each(function(){t.push(e(this).attr("id"))}),t},ft=function(){var t=0,i=[];return oe.find("tbody#the-list > tr").each(function(){e(this).find("th.check-column input:checked").length>0&&i.push(t),t++}),i},ut=function(){de.find("input.is_resetable, textarea.is_resetable").each(function(){e(this).val("")}),de.find("select.is_resetable").each(function(){e(this).hasClass("chosen")||(e(this).prop("selectedIndex",0),e(this).trigger("change"))}),de.find("select.is_resetable").each(function(){e(this).prop("selectedIndex",0),e(this).trigger("change")}),de.find(".yith-wcbep-image-bulk-reset").trigger("click");var t=extra_bulk.chosen;for(i in t){var a=e("#yith-wcbep-"+t[i]+"-bulk-chosen");a.prop("selectedIndex",-1),a.select2()}ue.prop("selectedIndex",-1),ue.select2(),be.each(function(){e(this).prop("selectedIndex",-1),e(this).select2()})},bt=function(){A.find("input.is_resetable").each(function(){e(this).val("")}),A.find("select.is_resetable").each(function(){e(this).prop("selectedIndex",0)}),A.find(".chosen.is_resetable").each(function(){e(this).val("").trigger("change")})},vt=function(){if(T)for(var t in z){var i=z[t];for(var a in i)if(e(i[a])[0]==T[0]&&void 0!==z[parseInt(t)+1])return e(z[parseInt(t)+1][a]).trigger("click"),void p.selectText()}},gt=function(){var t=[];if(xe.find("input[type=checkbox]").each(function(){var i=e(this).data("cols-id");e(this).is(":checked")?oe.find(".column-"+i).show():(oe.find(".column-"+i).hide(),t.push(i))}),!s){var i={hidden_cols:t,action:"yith_wcbep_save_default_hidden_cols"};e.ajax({type:"POST",data:i,url:ajaxurl,success:function(e){}})}tt()};e.fn.extend({hasClasses:function(t,i){var a=this;if("OR"==i){for(var l in t)if(e(a).hasClass(t[l]))return!0;return!1}var n=!0;for(var l in t)e(a).hasClass(t[l])||(n=!1);return n}}),e.fn.selectText=function(){var e=document,t=this[0];if(e.body.createTextRange)(a=document.body.createTextRange()).moveToElementText(t),a.select();else if(window.getSelection){var i=window.getSelection(),a=document.createRange();a.selectNodeContents(t),i.removeAllRanges(),i.addRange(a)}},Be.on("click",function(){e(this).parent().fadeOut()}),e(".yith-wcbep-datepicker").datepicker({dateFormat:"yy/mm/dd"}),de.draggable({stop:function(){e(this).css({height:"auto"})}}),xe.draggable(),je.draggable(),oe.css({height:"auto",width:Qe}),o.resizable({minHeight:20,maxHeight:20,minWidth:100,handles:"e",resize:function(){var t=Me*e(this).width()/100;oe.css({height:"auto",width:t})}}),e("#yith-wcbep-bulk-editor-container").tabs(),A.find(".chosen").select2(),h.select2({width:"100%"}),be.select2(),p.offset([0,0]),Pe.on("click",function(){var e='<tr class="yith-wcbep-table-new-product">';for(var t in D){var i=D[t]+" column-"+D[t],a="";switch(D[t]){case"cb":e+='<th scope="row" class="check-column"></th>';break;case"ID":a="NEW";break;case"title":a="New Product";break;case"image":a='<img src=""><input class="yith-wcbep-hidden-image-value" value="" type="hidden">';break;case"image_gallery":a='<div class="yith-wcbep-table-image-gallery"></div>';break;case"categories":a='<div class="yith-wcbep-select-values"></div> <input class="yith-wcbep-select-selected" value="[]" type="hidden">';break;case"stock_status":case"manage_stock":case"sold_individually":case"featured":case"virtual":case"downloadable":case"enable_reviews":a='<input class="yith-wcbep-editable-checkbox" type="checkbox"> <input class="yith-wcbep-hidden-checkbox-value" value="0" type="hidden">';break;case"tax_status":case"tax_class":case"allow_backorders":case"shipping_class":case"status":case"visibility":case"download_type":case"prod_type":a='<div class="not_editable_for_new"></div><input type="hidden" class="yith-wcbep-hidden-checkbox-value" value="">'}"attr_"==D[t].substring(0,5)&&(a='<div class="not_editable_for_new"></div>'),"cb"!=D[t]&&(e+='<td class="'+i+'">'+a+"</td>")}e+="</tr>",oe.find("tbody").prepend(e),gt(),it()}),De.on("click",function(t){if(t.stopPropagation(),!((Fe=ft()).length<1)){if("yes"!=e(this).data("confirm"))return e(this).val(ajax_object.delete_confirm_txt.replace("%s",Fe.length)),e(this).data("confirm","yes"),void e(this).addClass("yith-wcbep-confirm-btn");e(this).val(ajax_object.delete_txt),e(this).data("confirm","no"),e(this).removeClass("yith-wcbep-confirm-btn"),oe.block(Xe),_e.prop("disabled",!0),he.prop("disabled",!0);var i=nt(),a=[];for(var l in Fe){var n=i[Fe[l]];a.push(n)}var s={products_to_delete:a,action:"yith_wcbep_bulk_delete_products"};e.ajax({type:"POST",data:s,url:ajaxurl,success:function(t){We.html("<p>"+t+"</p>");var i=e('<button type="button" class="notice-dismiss" />');i.appendTo(We),We.fadeIn(),i.on("click",function(){We.fadeOut()}),E.trigger("click")}})}}),ze.on("click",function(){if(!((Fe=ft()).length<1)){var e=lt(),t=[];for(var i in Fe)t.push(e[Fe[i]]);var a=[D,t],l=JSON.stringify(a),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),n.setAttribute("download","yith_exported_products.txt"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}),He.on("click",function(){if(!((Fe=ft()).length<1)){var e=lt(),t=[];for(var i in Fe)t.push(parseInt(e[Fe[i]][D.indexOf("ID")]));var a=JSON.stringify(t);Ue.val(a),Ae.submit()}}),Te.on("click",function(){ht()}),qe.on("click",function(){dt()}),u.on("click",function(){Ge(J,f),Ke(!0)}),b.on("click",function(){Ke(!0)}),x.on("click",function(){Ge(J,_),Ke(!0)}),k.on("click",function(){Ke(!0)}),O.on("click",function(){var e=wp.media({title:"Upload Image",multiple:!0}).open().on("select",function(t){var i="";e.state().get("selection").map(function(e){var t=e.toJSON().url;i+='<li class="image"><span class="delete">x</span><img data-image-id="'+e.id+'" src="'+t+'"></li>'}),_.find("#yith-wcbep-custom-input-gallery-container ul").append(i),$e()})}),w.on("click",function(){Ge(J,g),Ke(!0)}),m.on("click",function(){g.find("img").attr("src",""),g.find(".yith-wcbep-hidden-image-value").val("")}),y.on("click",function(){Ke(!0)}),g.on("click",".yith-wcbep-custom-input-image-container",function(t){t.preventDefault();var i=e(this).find("img").first(),a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(e){var t=a.state().get("selection").first(),l=t.toJSON().url;i.attr("src",l),g.find(".yith-wcbep-hidden-image-value").val(t.id)})}),e("#yith-wcbep-image-bulk-choose-image").on("click",function(t){var i=e(this).closest(".yith-wcbep-bulk-form-content-col"),a=i.find("#yith-wcbep-image-bulk-preview"),l=i.find("#yith-wcbep-image-bulk-value"),n=i.find("#yith-wcbep-image-bulk-src"),s=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var i=s.state().get("selection").first(),c=i.toJSON().url,r=e("<img />").attr("src",c),o=e('<span class="yith-wcbep-image-bulk-reset dashicons dashicons-no-alt"></span>');a.html("").append(r).append(o),l.val(i.id),n.val(c)})}),e(document).on("click",".yith-wcbep-image-bulk-reset",function(){var t=e(this).closest(".yith-wcbep-bulk-form-content-col"),i=t.find("#yith-wcbep-image-bulk-preview"),a=t.find("#yith-wcbep-image-bulk-value"),l=t.find("#yith-wcbep-image-bulk-src");a.val(""),i.html(""),l.val("")}),I.on("click",function(){R.append(N.html()),et()}),C.on("click",function(){Ge(J,S),Ke(!0)}),j.on("click",function(){Ke(!0)}),de.find("select").on("change",function(){var t=e(this);"rep"==t.val()?t.parent().find(".yith_wcbep_no_display").show():t.parent().find(".yith_wcbep_no_display").hide()}),n.on("click",function(){Ke(!0),xe.fadeOut(),De.val(ajax_object.delete_txt).data("confirm","no").removeClass("yith-wcbep-confirm-btn")}),p.on("click",function(e){e.stopPropagation()}).keypress(function(e){13==e.which&&(Ke(!0),e.stopPropagation(),setTimeout(vt,0))}),E.on("click",function(){var t=[];r.each(function(){var i=e(this).val();void 0!==i&&i&&t.push([e(this).data("taxonomy-name"),e(this).val()])});var i={paged:"1",order:"desc",orderby:"ID",f_title_select:H.val(),f_title_value:U.val(),f_sku_select:W.val(),f_sku_value:M.val(),f_categories:B.val(),f_tags:Y.val(),f_attributes:t,f_reg_price_select:G.val(),f_reg_price_value:K.val(),f_sale_price_select:L.val(),f_sale_price_value:V.val(),f_weight_select:Z.val(),f_weight_value:$.val(),f_stock_qty_select:ee.val(),f_stock_qty_value:te.val(),f_per_page:le.val(),f_product_type:ne.val(),f_stock_status:ie.val(),f_status:ae.val(),f_show_variations:se[0].checked?"yes":"no"};list.update(i)}),he.on("click",function(){Ke(!0);var t=[];if(oe.find("tbody#the-list th.check-column > input:checked").each(function(){t.push(e(this).val())}),t.length<1)alert(ajax_object.no_product_selected);else{var i=e(window).scrollTop()+50;de.css({top:i}),de.fadeIn(),e("#wpwrap").block(Ye),Fe=ft()}}),e("#yith-wcbep-bulk-cancel").add(".yith-wcbep-close-bulk-editor").on("click",function(){de.fadeOut(),ut(),e("#wpwrap").unblock()}),de.keypress(function(e){13==e.which&&pe.trigger("click")}),de.find("textarea").keypress(function(e){13==e.which&&e.stopPropagation()}),pe.on("click",function(){var t=fe.val(),i=null!=ue.val()?ue.val():"",a=[],l=[],n=we.val(),s=ye.val(),c=me.val();ue.find("option").each(function(){a.push(e(this).val()),l.push(e(this).text())});for(var r in Fe){var o=Fe[r];if(i.length>0&&D.indexOf("categories")>-1){var h=e(z[o][D.indexOf("categories")]),d=e.parseJSON(h.find(".yith-wcbep-select-selected").val()),p="",f=[];for(var u in d)f.push(d[u].toString());switch(d=f.slice(),t){case"new":p=i;break;case"add":p=d.slice();for(var u in i)-1==p.indexOf(i[u])&&p.push(i[u]);break;case"rem":p=d.slice();for(var u in i)(r=p.indexOf(i[u]))>-1&&p.splice(r,1)}x=p;h.find(".yith-wcbep-select-selected").val("["+x+"]");O="";for(var u in x)O+=l[a.indexOf(x[u])],u<x.length-1&&(O+=", ");h.find(".yith-wcbep-select-values").html(O)}var b=extra_bulk.chosen;for(var u in b)if(D.indexOf(b[u])>-1){var v=e(z[o][D.indexOf(b[u])]),g=e.parseJSON(v.find(".yith-wcbep-select-selected").val()),w="",y=[],m=e("#yith-wcbep-"+b[u]+"-bulk-select").val(),_=e("#yith-wcbep-"+b[u]+"-bulk-chosen"),k=_.val();for(var u in g)g[u]&&y.push(g[u].toString());switch(g=y.slice(),m){case"new":w=k;break;case"add":w=g.slice();for(var u in k)-1==w.indexOf(k[u])&&w.push(k[u]);break;case"rem":w=g.slice();for(var u in k)(r=w.indexOf(k[u]))>-1&&w.splice(r,1)}var x=w;v.find(".yith-wcbep-select-selected").val("["+x+"]");var O="";for(var u in x)O+=_.find("option[value="+x[u]+"]").text(),u<x.length-1&&(O+=", ");v.find(".yith-wcbep-select-values").html(O)}if(D.indexOf("tags")>-1){var S=e(z[o][D.indexOf("tags")]),j=q[o][D.indexOf("tags")],C="";if((""!=s||"del"==n)&&S.find(".not_editable").length<1){switch(n){case"new":C=s;break;case"pre":C=s+j;break;case"app":C=j+s;break;case"rep":C=j.replace(new RegExp(s,"g"),c);break;case"del":C=""}S.html(C)}}var I=["weight","height","width","length","stock_quantity","download_limit","download_expiry","regular_price","sale_price","menu_order"];for(var u in I)if(D.indexOf(I[u])>-1){var v=e(z[o][D.indexOf(I[u])]),N=parseFloat(v.html()),R="",F=e("#yith-wcbep-"+I[u]+"-bulk-select").val(),J=e("#yith-wcbep-"+I[u]+"-bulk-value").val();if((!isNaN(J)&&""!=J||"del"==F)&&v.find(".not_editable").length<1){switch(F){case"new":R=parseFloat(J);break;case"inc":R=(N=isNaN(N)?0:N)+parseFloat(J);break;case"dec":R=N>0?N-parseFloat(J):"";break;case"incp":R=N>0?N+N*parseFloat(J)/100:"";break;case"decp":R=N>0?N-N*parseFloat(J)/100:"";break;case"decfr":T=e(z[o][D.indexOf("regular_price")]);N=parseFloat(T.html()),isNaN(N)||""==N||(R=N-parseFloat(J));break;case"decpfr":var T=e(z[o][D.indexOf("regular_price")]);N=parseFloat(T.html()),isNaN(N)||""==N||(R=N-N*parseFloat(J)/100);break;case"del":R=""}""!=R&&(R<0||isNaN(R))&&(R=0),v.html(R)}}var P=["purchase_note","description","shortdesc"];for(var u in P)if(D.indexOf(P[u])>-1){var N=(v=e(z[o][D.indexOf(P[u])])).text(),R="",F=e("#yith-wcbep-"+P[u]+"-bulk-select").val(),J=e("#yith-wcbep-"+P[u]+"-bulk-value").val(),E=e("#yith-wcbep-"+P[u]+"-bulk-replace").val();if(""!=J&&v.find(".not_editable").length<1){switch(F){case"new":R=J;break;case"pre":R=J+N;break;case"app":R=N+J;break;case"rep":R=N.replace(new RegExp(J,"g"),E)}v.text(R)}}var A=["manage_stock","stock_status","sold_individually","featured","virtual","downloadable","enable_reviews"];for(var u in A)if(D.indexOf(A[u])>-1){var v=e(z[o][D.indexOf(A[u])]),F=e("#yith-wcbep-"+A[u]+"-bulk-select").val();if(v.find(".not_editable").length<1)switch(F){case"skip":break;case"yes":v.find(".yith-wcbep-editable-checkbox").prop("checked",!1).trigger("click");break;case"no":v.find(".yith-wcbep-editable-checkbox").prop("checked",!0).trigger("click")}}var H=["tax_status","tax_class","allow_backorders","shipping_class","status","visibility","download_type","prod_type"];H=H.concat(extra_bulk.select);for(var u in H)if(D.indexOf(H[u])>-1){v=e(z[o][D.indexOf(H[u])]);"skip"!=(F=e("#yith-wcbep-"+H[u]+"-bulk-select").val())&&v.find(".not_editable").length<1&&v.find(".yith-wcbep-editable-select").val(F).trigger("change")}var U=["button_text","product_url","slug","up_sells","cross_sells","title","sku","sale_price_from","sale_price_to","date"];U=U.concat(extra_bulk.text);for(var u in U)if(D.indexOf(U[u])>-1){var N=(v=e(z[o][D.indexOf(U[u])])).html(),R="",F=e("#yith-wcbep-"+U[u]+"-bulk-select").val(),J=e("#yith-wcbep-"+U[u]+"-bulk-value").val(),E=e("#yith-wcbep-"+U[u]+"-bulk-replace").val();if((""!=J||"del"==F)&&v.find(".not_editable").length<1){switch(F){case"new":R=J;break;case"pre":R=J+N;break;case"app":R=N+J;break;case"rep":R=N.replace(new RegExp(J,"g"),E);break;case"del":R=""}v.html(R)}}if(D.indexOf("image")>-1){var N=(v=e(z[o][D.indexOf("image")])).html(),R="",F=e("#yith-wcbep-image-bulk-select").val(),J=e("#yith-wcbep-image-bulk-value").val(),E=e("#yith-wcbep-image-bulk-src").val();if((""!=J||"del"==F)&&v.find(".not_editable").length<1){switch(F){case"new":R=J;break;case"del":R="",E=""}v.find(".yith-wcbep-hidden-image-value").val(R),v.find("img").attr("src",E)}}be.each(function(){var t=e(this);if(D.indexOf("attr_"+t.data("taxonomy-name"))>-1){var i=e(z[o][D.indexOf("attr_"+t.data("taxonomy-name"))]),a=t.parent().parent().find(".yith-wcbep-attributes-bulk-select").val(),l="",n=e.parseJSON(i.find(".yith-wcbep-select-selected").val()),s=t.val(),c=[],r=[];for(var h in n)n[h]=""+n[h];switch(t.find("option").each(function(){r.push(e(this).val()),c.push(e(this).text())}),a){case"new":l=s;break;case"add":l=n.slice();for(var h in s)-1==l.indexOf(s[h])&&l.push(s[h]);break;case"rem":l=n.slice();for(var h in s){var d=l.indexOf(s[h]);d>-1&&l.splice(d,1)}}var p=l;i.find(".yith-wcbep-attr-is-visible").val()<0&&p.length>0&&(p=[p[0]]),i.find(".yith-wcbep-select-selected").val("["+p+"]");var f="";for(var h in p)f+=c[r.indexOf(p[h])],h<p.length-1&&(f+=", ");i.find(".yith-wcbep-select-values").html(f)}}),ve.each(function(){var t=e(this);if(D.indexOf("attr_"+t.data("taxonomy-name"))>-1){var i=e(z[o][D.indexOf("attr_"+t.data("taxonomy-name"))]);switch(t.val()){case"yes":i.find(".yith-wcbep-attr-is-visible").val("1");break;case"no":i.find(".yith-wcbep-attr-is-visible").val("0")}}}),ge.each(function(){var t=e(this);if(D.indexOf("attr_"+t.data("taxonomy-name"))>-1){var i=e(z[o][D.indexOf("attr_"+t.data("taxonomy-name"))]);switch(t.val()){case"yes":i.find(".yith-wcbep-attr-is-variation").val("1");break;case"no":i.find(".yith-wcbep-attr-is-variation").val("0")}}})}de.fadeOut(),ut(),Ze(!0),e("#wpwrap").unblock()}),ce.on("click",function(){bt()}),re.on("click",function(){var t=[],i=[];r.each(function(i,a){var l=e(a),n=null!=l.val()?l.val():null;for(var s in n)n[s]=parseInt(n[s]);t.push([l.data("taxonomy-name"),n])}),P=lt();var a=null!=B.val()?B.val().map(parseInt):null,l=[];for(var n in Y.val()){var s=Y.find("option[value="+Y.val()[n]+"]").html();l.push(s)}for(var c in P){var o=P[c],h=!0;if(U.val().length>0){var d=o[D.indexOf("title")];switch(d.length<1&&(h=!1),H.val()){case"cont":d.indexOf(U.val())<0&&(h=!1);break;case"notcont":d.indexOf(U.val())>-1&&(h=!1);break;case"starts":0!=d.indexOf(U.val())&&(h=!1);break;case"ends":d.indexOf(U.val())!=d.length-U.val().length&&(h=!1)}}if(M.val().length>0){var p=o[D.indexOf("sku")];switch(p.length<1&&(h=!1),W.val()){case"cont":p.indexOf(M.val())<0&&(h=!1);break;case"notcont":p.indexOf(M.val())>-1&&(h=!1);break;case"starts":0!=p.indexOf(M.val())&&(h=!1);break;case"ends":p.indexOf(M.val())!=p.length-M.val().length&&(h=!1)}}if(null!=a&&a.length>0){var f=e.parseJSON(o[D.indexOf("categories")]);f.length<1&&(h=!1);for(var u in a)f.indexOf(a[u])<0&&(h=!1)}if(null!=l&&l.length>0){var b=o[D.indexOf("tags")].split(", ");b.length<1&&(h=!1);for(var u in l)b.indexOf(l[u])<0&&(h=!1)}for(var u in t)if(null!=t[u][1]&&t[u][1].length>0){var v=o[D.indexOf("attr_"+t[u][0])][2];v.length<1&&(h=!1);var g=t[u][1];for(var n in g)v.indexOf(g[n])<0&&(h=!1)}if(K.val().length>0){var w=parseFloat(o[D.indexOf("regular_price")]),y=parseFloat(K.val());switch(G.val()){case"mag":w>y||(h=!1);break;case"min":w<y||(h=!1);break;case"ug":w!=y&&(h=!1);break;case"magug":w>=y||(h=!1);break;case"minug":w<=y||(h=!1)}}if(V.val().length>0){var m=parseFloat(o[D.indexOf("sale_price")]),y=parseFloat(V.val());switch(L.val()){case"mag":m>y||(h=!1);break;case"min":m<y||(h=!1);break;case"ug":m!=y&&(h=!1);break;case"magug":m>=y||(h=!1);break;case"minug":m<=y||(h=!1)}}if($.val().length>0){var _=parseFloat(o[D.indexOf("weight")]),k=parseFloat($.val());switch(Z.val()){case"mag":_>k||(h=!1);break;case"min":_<k||(h=!1);break;case"ug":_!=k&&(h=!1);break;case"magug":_>=k||(h=!1);break;case"minug":_<=k||(h=!1)}}if(te.val().length>0){var x=parseFloat(o[D.indexOf("stock_quantity")]),O=parseFloat(te.val());switch(ee.val()){case"mag":x>O||(h=!1);break;case"min":x<O||(h=!1);break;case"ug":x!=O&&(h=!1);break;case"magug":x>=O||(h=!1);break;case"minug":x<=O||(h=!1)}}if(ie.val().length>0){var S=o[D.indexOf("stock_status")],j=ie.val();0==S&&"instock"==j&&(h=!1),1==S&&"outofstock"==j&&(h=!1)}if(ae.val().length>0){var C=o[D.indexOf("status")],I=ae.val();I&&(h=C===I)}"no"==(se[0].checked?"yes":"no")&&e(o[D.indexOf("prod_type")]).is(".not_editable")&&(h=!1),h&&i.push(parseInt(c))}var N=0;oe.find("tbody#the-list th.check-column > input").each(function(){i.indexOf(N)>-1?e(this).attr("checked",!0):e(this).attr("checked",!1),N++})}),_e.on("click",function(){if(Ze(),Je.length>0){oe.block(Xe),_e.prop("disabled",!0),he.prop("disabled",!0),P=lt();var t=[],i=[];for(var a in Je){var l=Je[a];t.push(P[l]),i.push(Ve[l])}for(var n in i){var s=i[n];for(ic in s)0==s[ic]&&2!=ic&&(t[n][ic]=null)}var c=t.length,r=c,o=0,h=e("#yith-wcbep-percentual-container");h.html('<span class="yith-wcbep-percentual" style="width:'+o+'%;">'+o+"%</span>");var d=h.find("span.yith-wcbep-percentual");h.fadeIn();var p=t.length,f=function(a){if(a<p){var l={matrix_keys:D,matrix_modify:[t[a]],edited_matrix:[i[a]],action:"yith_wcbep_bulk_edit_products"};e.ajax({type:"POST",data:l,url:ajaxurl,success:function(e){},complete:function(e){c--,o=parseInt(100*(r-c)/r),d.html(o+"%"),d.animate({width:o+"%"}),f(++a)}})}else list.update(),h.delay(1500).fadeOut()};p>0&&f(0)}}),ke.on("click",function(t){t.stopPropagation(),Ke(!0);var i=e(window).scrollTop()+100;xe.css({top:i}),xe.fadeIn()}),xe.on("click","input[type=checkbox]",function(e){gt()}),Oe.on("click",function(){xe.find("input").attr("checked",!0),xe.find("input").first().attr("checked",!1).trigger("click")}),Se.on("click",function(){xe.find("input").attr("checked",!1),xe.find("input").first().attr("checked",!0).trigger("click")}),Ee.on("click",function(e){var t=Ee.offset().top+Ee.outerHeight()+20,i=Ee.offset().left+Ee.outerWidth()/2-200;je.fadeIn("fast"),je.offset({top:t,left:i})}),Ce.on("click",function(){Ne.val(""),je.fadeOut("fast")}),Re.on("click",function(){var e=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var t=e.state().get("selection").first().toJSON().url;Ne.val(t)})}),Ie.on("click",function(){e("#yith-wcbep-importer-form");var t={file_url:Ne.val(),action:"yith_wcbep_import"};e.ajax({type:"POST",data:t,url:ajaxurl,success:function(t){if(t.length>0){We.html("<p>"+t+"</p>");var i=e('<button type="button" class="notice-dismiss" />');i.appendTo(We),We.fadeIn(),i.on("click",function(){We.fadeOut()})}je.unblock(),je.fadeOut("fast"),Ne.val("")}})}),list={f_data:{paged:"1",order:"desc",orderby:"ID",f_show_variations:"no",lang:c},init:function(){var t;it(),e(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(t){if(t.preventDefault(),!(st>1)){var i=this.search.substring(1),a=[];r.each(function(){a.push([e(this).data("taxonomy-name"),e(this).val()])}),e.extend(list.f_data,{paged:list.__query(i,"paged")||1,order:list.__query(i,"order")||list.f_data.order,orderby:list.__query(i,"orderby")||list.f_data.orderby}),list.update(list.f_data)}}),e("input[name=paged]").on("change",function(i){13==i.which&&i.preventDefault();var a=e(".tablenav-pages a")[0].search.substring(1),l=parseInt(e(this).val()),n=parseInt(e("#total_pages").val());l=Math.min(l,n),l=Math.max(l,1),e.extend(list.f_data,{paged:l,order:list.__query(a,"order")||list.f_data.order,orderby:list.__query(a,"orderby")||list.f_data.orderby}),window.clearTimeout(t),t=window.setTimeout(function(){list.update(list.f_data)},500)})},update:function(t){if(oe.block(Xe),_e.prop("disabled",!0),he.prop("disabled",!0),void 0!==t&&e.extend(list.f_data,t),Q.length&&(list.f_data=e.extend({f_brands:Q.val()},t)),X.length){var i=[];X.each(function(){var t=e(this).val();if(t){var a={taxonomy:e(this).data("taxonomy"),values:t};i.push(a)}}),list.f_data=e.extend({f_custom_taxonomies:i},list.f_data)}e.ajax({url:ajaxurl,data:e.extend({_ajax_yith_wcbep_list_nonce:e("#_ajax_yith_wcbep_list_nonce").val(),action:"_ajax_fetch_yith_wcbep_list"},list.f_data),success:function(t){var i=e.parseJSON(t);i.rows.length&&e("#the-list").html(i.rows),i.column_headers.length&&e("thead tr, tfoot tr").html(i.column_headers),i.pagination.bottom.length&&e(".tablenav.top .tablenav-pages").html(e(i.pagination.top).html()),i.pagination.top.length&&e(".tablenav.bottom .tablenav-pages").html(e(i.pagination.bottom).html()),list.init(),oe.unblock(),_e.prop("disabled",!1),he.prop("disabled",!1),at()}})},__query:function(e,t){for(var i=e.split("&"),a=0;a<i.length;a++){var l=i[a].split("=");if(l[0]==t)return l[1]}return!1}},list.init()});