jQuery(function(a){var wa=a("#yith-wcbep-my-page-wrapper"),Qa="yes"==wa.data("is-vendor"),ja=a(".yith_webep_attr_chosen"),da=a("#yith-wcbep-resize-table"),Ra=a(".yith-wcbep-chosen"),F=a("#yith-wcbep-custom-input-categories"),v=a("#yith-wcbep-custom-input"),O=a("#yith-wcbep-custom-input-textarea"),Sa=a("#yith-wcbep-custom-input-textarea-button-save"),Ta=a("#yith-wcbep-custom-input-textarea-button-cancel"),K=a("#yith-wcbep-custom-input-date"),D=a("#yith-wcbep-custom-input-image"),Ua=a("#yith-wcbep-custom-input-image-button-save"),
Va=a("#yith-wcbep-custom-input-image-button-cancel"),Wa=a("#yith-wcbep-custom-input-image-button-remove"),H=a("#yith-wcbep-custom-input-gallery"),Xa=a("#yith-wcbep-custom-input-gallery-button-cancel"),Ya=a("#yith-wcbep-custom-input-gallery-button-save"),Za=a("#yith-wcbep-custom-input-gallery-button-add"),L=a("#yith-wcbep-custom-input-downloadable-files"),$a=a("#yith-wcbep-custom-input-downloadable-files-button-cancel"),ab=a("#yith-wcbep-custom-input-downloadable-files-button-save"),bb=a("#yith-wcbep-custom-input-downloadable-files-button-add"),
xa=a("#yith-wcbep-custom-input-downloadable-files-default-row tbody"),R=a("#yith-wcbep-custom-input-downloadable-files-table"),S=a("#yith-wcbep-message-not-editable"),d=null,U=null,V=[],W=[],h=[],w=[],ka=a("#yith-wcbep-get-products"),ea=a("#yith-wcbep-filter-form"),ya=a("#yith-wcbep-title-filter-select"),P=a("#yith-wcbep-title-filter-value"),za=a("#yith-wcbep-sku-filter-select"),Q=a("#yith-wcbep-sku-filter-value"),la=a("#yith-wcbep-categories-filter"),Aa=a("#yith-wcbep-brands-filter"),Ba=a(".yith-wcbep-custom-taxonomy-filter"),
fa=a("#yith-wcbep-tags-filter"),Ca=a("#yith-wcbep-regular-price-filter-select"),ma=a("#yith-wcbep-regular-price-filter-value"),Da=a("#yith-wcbep-sale-price-filter-select"),na=a("#yith-wcbep-sale-price-filter-value"),Ea=a("#yith-wcbep-weight-filter-select"),oa=a("#yith-wcbep-weight-filter-value"),cb=a("#yith-wcbep-per-page-filter"),db=a("#yith-wcbep-product-type-filter-select"),Fa=a("#yith-wcbep-show-variations-filter"),eb=a("#yith-wcbep-reset-filters"),fb=a("#yith-wcbep-check-by-filters"),q=a("#yith-wcbep-table-wrap").find(".wp-list-table").first(),
X=a("#yith-wcbep-bulk-edit-btn"),E=a("#yith-wcbep-bulk-editor"),Ga=a("#yith-wcbep-bulk-apply"),gb=a("#yith-wcbep-categories-bulk-select"),Y=a("#yith-wcbep-categories-bulk-chosen"),pa=a(".yith-wcbep-attributes-bulk-chosen"),hb=a("#yith-wcbep-tags-bulk-select"),ib=a("#yith-wcbep-tags-bulk-value"),jb=a("#yith-wcbep-tags-bulk-replace"),Z=a("#yith-wcbep-save"),kb=a("#yith-wcbep-cols-settings-btn"),I=a("#yith-wcbep-columns-settings-wrapper"),lb=a("#yith-wcbep-columns-settings-select-all"),mb=a("#yith-wcbep-columns-settings-unselect-all"),
T=a("#yith-wcbep-importer-wrapper"),nb=a("#yith-wcbep-importer-cancel"),ob=a("#yith-wcbep-importer-save"),ga=a("#yith-wcbep-importer-upload-url"),pb=a("#yith-wcbep-importer-upload-btn"),A=[],aa=[],qb=a("#yith-wcbep-undo"),rb=a("#yith-wcbep-redo"),sb=a("#yith-wcbep-new"),Ha=a("#yith-wcbep-delete"),tb=a("#yith-wcbep-export"),ba=a("#yith-wcbep-import");a("#yith-wcbep-imported-file");var ub=a("#yith-wcbep-export-form"),vb=a("#yith-wcbep-export-form-btn"),wb=a("#yith-wcbep-export-ids"),N=a("#yith-wcbep-message"),
ca=q.width(),xb=a(".yith-wcbep-close"),yb=ca*da.width()/100,qa={message:null,overlayCSS:{background:"#000 url()",opacity:.6},ignoreIfBlocked:!0},zb={message:null,overlayCSS:{background:"#000 url()",opacity:.6,cursor:"default"}},M=function(c,b){if(b==L){var e=R.find("tr"),d="";R.find("tr").each(function(){var b=a(this).find("td.file_name input").val(),c=a(this).find("td.file_url input").val();d+='<input type="hidden" class="yith-wcbep-hidden-downloadable-file" data-file-name="'+b+'" data-file-url="'+
c+'" />'});0<e.length&&(d=1<e.length?d+(e.length+" "+ajax_object.files):d+(e.length+" "+ajax_object.file));c.html(d)}else if(b==H){var h="";b.find("li.image img").each(function(){h+='<img data-image-id="'+a(this).data("image-id")+'" src="'+a(this).attr("src")+'" />'});c.find(".yith-wcbep-table-image-gallery").html(h)}else if(b==F||b==u||b==B){e=null!=b.find("select.chosen").val()?b.find("select.chosen").val():"";c.find(".yith-wcbep-select-selected").val("["+e+"]");var t=b.find("select"),q="";""!=
e&&"object"!=typeof e&&(e=[e]);for(var m in e)q+=t.find("option[value="+e[m]+"]").html(),m<e.length-1&&(q+=", ");c.find(".yith-wcbep-select-values").html(q);b==u&&-1!=c.find(".yith-wcbep-attr-is-visible").val()&&-1!=c.find(".yith-wcbep-attr-is-variation").val()&&(e=b.find(".yith-wcbep-custom-input-attributes-visible").is(":checked")?"1":"0",t=b.find(".yith-wcbep-custom-input-attributes-variations").is(":checked")?"1":"0",c.find(".yith-wcbep-attr-is-visible").val(e),c.find(".yith-wcbep-attr-is-variation").val(t))}else b==
O?c.html(b.find("textarea").val()):b==K?c.html(b.find("input").val()):b==D?(e=b.find("img").attr("src")?b.find("img").attr("src"):"",t=b.find(".yith-wcbep-hidden-image-value").val(),c.find("img").attr("src",e),c.find(".yith-wcbep-hidden-image-value").val(t)):(e=b.find("input"),c.hasClasses("regular_price sale_price weight height width length stock_quantity download_limit download_expiry menu_order".split(" "),"OR")?(e=e.val(),isNaN(e)?""==e&&c.html(""):c.html(e)):c.find(".yith-wcbep-editable-checkbox").length||
c.html(e.val()))},C=function(a){var b=!1;v.is(":visible")&&(b=!0,a&&v.hide(),d&&(M(d,v),v.val(""),d=null));F.is(":visible")&&(b=!0,a&&F.hide(),d&&(M(d,F),d=null));O.is(":visible")&&(b=!0,a&&O.hide(),d&&(d=null));K.is(":visible")&&(b=!0,a&&K.hide(),d&&(M(d,K),d=null));u&&u.is(":visible")&&(b=!0,a&&u.hide(),d&&(M(d,u),d=null));D.is(":visible")&&(b=!0,a&&D.hide(),d&&(d=null));H.is(":visible")&&(b=!0,a&&H.hide(),d&&(d=null));L.is(":visible")&&(b=!0,a&&L.hide(),d&&(d=null));B&&B.is(":visible")&&(b=!0,
a&&B.hide(),d&&(M(d,B),d=null));S.is(":visible")&&a?S.hide():G&&b&&(sa(),G=null)},G,sa=function(){var a=G.data("y"),b=G.data("x")+1;G.html()!=V[a][b]?G.addClass("yith-wcbep-table-modified-td"):G.removeClass("yith-wcbep-table-modified-td");ta()},ua=[],va=function(c){var b=0;ua=[];aa=[];q.find("tbody#the-list > tr").each(function(){var c=a(this).children("td"),d=!1;if(0<c.length){var h=1,t=[];t.push(0);c.each(function(){a(this).html()!=V[b][h]?(a(this).addClass("yith-wcbep-table-modified-td"),d=!0,
t.push(1)):(a(this).removeClass("yith-wcbep-table-modified-td"),t.push(0));h++});ua.push(t);d&&aa.push(b);b++}});c&&ta()},u,Ia=function(){H.find(".yith-wcbep-image-gallery").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(a,b){b.item.css("background-color","#aaa")},stop:function(a,b){b.item.removeAttr("style")},update:function(){a("#yith-wcbep-custom-input-gallery-container ul li.image").css("cursor",
"default")}});H.find("span.delete").on("click",function(){a(this).closest("li.image").remove()})},Ja=function(){L.find(".delete").on("click",function(){a(this).closest("tr").remove()});L.find(".yith-wcbep-custom-input-downloadable-files-choose-file").on("click",function(){var c=a(this).closest("tr"),b=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var a=b.state().get("selection").first().toJSON().url;c.find("td.file_url input").val(a)})});R.sortable({items:"tr",cursor:"move",
axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65})},Ka=function(){var a=150*q.children("thead").find("th:visible").length,a=ca>a?ca:a;da.css({width:100*a/ca+"px"});da.trigger("resize");q.css({height:"auto",width:a})},B,Ma=function(){Ka();J=[];x=0;q=a("#yith-wcbep-table-wrap .wp-list-table");La();G=null;q.on("click","th#cb input",function(){var b=q.find("tbody#the-list th.check-column > input");a(this).is(":checked")?b.attr("checked",!0):b.attr("checked",
!1)});q.on("click","td.stock_status, td.manage_stock, td.sold_individually, td.featured, td.virtual, td.downloadable, td.enable_reviews",function(){var b=a(this).find("input.yith-wcbep-editable-checkbox"),c=a(this).find("input.yith-wcbep-hidden-checkbox-value");b.is(":checked")?c.val("1"):c.val("0");G=d=a(this).closest("td");sa()});q.on("change","td .yith-wcbep-editable-select",function(){var b=a(this);a(this).closest("td").find("input.yith-wcbep-hidden-select-value").val(b.val());G=d=a(this).closest("td");
sa()});var c="title regular_price sale_price sku tags weight height width length stock_quantity download_limit download_expiry menu_order button_text product_url slug up_sells cross_sells".split(" "),c=c.concat(extra_class.text);q.on("click","td",function(b){b.stopPropagation();C(!0);d=a(b.target);G=a(b.target).closest("td");U=a(b.target);d.is("td")||(d=d.closest("td"));if(0<d.closest("td").find(".not_editable").length||0<d.closest("td").find(".not_editable_for_new").length)0<d.closest("td").find(".not_editable").length?
S.html(ajax_object.not_editable_variations):0<d.closest("td").find(".not_editable_for_new").length&&S.html(ajax_object.not_editable_new_product),S.show(),S.offset({top:b.pageY-55-10,left:b.pageX-107.5});else if(d.hasClasses(c,"OR"))b=v.find("input"),v.width(d.width()),v.height(d.height()),v.show(),v.offset(d.offset()),b.width(d.width()),b.height(d.height()),b.val(d.html()),b.trigger("focus").select();else if(a(b.target).closest("td").hasClasses(["categories"],"OR"))d=a(b.target).closest("td"),U=a(b.target).closest("td"),
v.prop("contenteditable","false"),F.width(d.width()),F.height(d.height()),F.find(".chosen").val(a.parseJSON(d.find(".yith-wcbep-select-selected").val())),F.find(".chosen").trigger("change"),F.show(),F.offset(d.offset()),F.find(".chosen").select2("open");else if(d.hasClasses(["description","shortdesc","purchase_note"],"OR"))O.find("textarea").val(d.html()),O.show(),O.offset(d.offset());else if(d.hasClasses(["image"],"OR")||a(b.target).closest("td").hasClasses(["image"],"OR")){d=a(b.target).closest("td");
b=d.find("img").attr("src")?d.find("img").attr("src"):"";var e=d.find(".yith-wcbep-hidden-image-value").val();D.find("img").attr("src",b);D.find(".yith-wcbep-hidden-image-value").val(e);D.show();D.offset(d.offset())}else if(d.hasClasses(["image_gallery"],"OR")||a(b.target).closest("td").hasClasses(["image_gallery"],"OR")){d=a(b.target).closest("td");b=d.find("img");var ra='<ul class="yith-wcbep-image-gallery">';0<b.length&&b.each(function(){ra+='<li class="image"><span class="delete">x</span><img data-image-id="'+
a(this).data("image-id")+'" src="'+a(this).attr("src")+'"></li>'});ra+="</ul>";H.find("#yith-wcbep-custom-input-gallery-container").html(ra);Ia();H.show();H.offset(d.offset())}else if(d.hasClasses(["downloadable_files"],"OR")||a(b.target).closest("td").hasClasses(["downloadable_files"],"OR")){d=a(b.target).closest("td");R.html("");b=d.find(".yith-wcbep-hidden-downloadable-file");var h=a(xa.html());0<b.length&&(b.each(function(){var b=h.clone(),c=a(this);b.find("td.file_name input").val(c.data("file-name"));
b.find("td.file_url input").val(c.data("file-url"));R.append(b)}),Ja());L.show();L.offset({top:d.offset().top,left:d.offset().left-L.width()/2})}else d.hasClasses(["date","sale_price_from","sale_price_to"],"OR")?(b=K.find("input"),K.width(d.width()),K.height(d.height()),b.width(d.width()),b.height(d.height()),b.val(d.html()),K.show(),K.offset(d.offset()),b.datepicker({dateFormat:"yy/mm/dd"}),b.trigger("focus")):d.hasClasses(extra_obj.chosen,"OR")?(b="yith-wcbep-custom-input-"+d.prop("class").split(" ")[0],
B=a("#"+b),B.width(d.width()),B.height(d.height()),B.find(".chosen").val(a.parseJSON(d.find(".yith-wcbep-select-selected").val())),B.find(".chosen").trigger("change"),B.show(),B.offset(d.offset()),B.find(".chosen").select2("open")):a(b.target).closest("td").is('[class^="attr_"]')&&(d=a(b.target).closest("td"),e=d.prop("class").split(" ")[0].replace("attr_",""),u=a("#yith-wcbep-custom-input-attributes-"+e),U=a(b.target).closest("td"),u.width("240px"),-1==d.find(".yith-wcbep-attr-is-visible").val()||
-1==d.find(".yith-wcbep-attr-is-variation").val()?(u.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").hide(),b=u.find(".chosen"),b.prop("multiple")&&(b.val("").trigger("change"),b.removeAttr("multiple").select2({width:"100%"}).append(a("<option></option>").attr("value","").text(ajax_object.leave_empty)))):(u.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").show(),b=u.find(".chosen"),b.prop("multiple")||(b.val("").trigger("change"),b.attr("multiple",!0).select2({width:"100%"}),b.find('option[value=""]').remove()),
1==d.find(".yith-wcbep-attr-is-visible").val()?u.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!0):u.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!1),1==d.find(".yith-wcbep-attr-is-variation").val()?u.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!0):u.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!1)),b.val(a.parseJSON(d.find(".yith-wcbep-select-selected").val())),b.trigger("change"),u.show(),u.offset(d.offset()))});
ta()},La=function(){V=[];w=[];var c=0;q.find("tbody#the-list > tr").each(function(){var b=a(this).children("td"),e=[a(this).children("th")];if(0<b.length){var d=[!1],h=0;b.each(function(){a(this).data("y",c);a(this).data("x",h);d.push(a(this).html());e.push(a(this));h++});V.push(d);w.push(e)}c++});h=Ab()},ha=function(){var c=[];q.find("tbody#the-list > tr").each(function(){var b=a(this).children("td");if(0<b.length){var e=[!1];b.each(function(){var b=a(this).find(".yith-wcbep-select-selected"),c=
a(this).find("input.yith-wcbep-hidden-checkbox-value"),d=a(this).find("input.yith-wcbep-hidden-select-value"),h=a(this).find("input.yith-wcbep-hidden-image-value"),m=a(this).find(".yith-wcbep-table-image-gallery"),k=a(this).find(".yith-wcbep-hidden-downloadable-file"),p=a(this).find(".not_editable");if(0<b.length)c=[],d=a(this).find("input.yith-wcbep-attr-is-visible"),h=a(this).find("input.yith-wcbep-attr-is-variation"),0<d.length&&0<h.length?(c.push(d.val()),c.push(h.val()),c.push(a.parseJSON(b.val())),
e.push(c)):e.push(b.val());else if(0<c.length)e.push(c.val());else if(0<d.length)e.push(d.val());else if(0<h.length)e.push(h.val());else if(0<m.length){var g=[];a(this).find("img").each(function(){g.push(a(this).data("image-id"))});g=0<g.length?g:"";e.push(g)}else if(0<k.length){var f=[];k.each(function(){f.push([a(this).data("file-name"),a(this).data("file-url")])});f=0<f.length?f:"";e.push(f)}else 0<p.length?a(this).is(".prod_type")?e.push("variation"):e.push(p.html()):e.push(a(this).html())});
c.push(e)}});return c},Bb=function(){var c=[];q.find("tbody#the-list > tr").each(function(){var b=a(this).children("td.ID");0<b.length&&b.each(function(){c.push(parseInt(a(this).html()))})});return c},x=0,J=[],ta=function(){var c=[];q.find("tbody#the-list > tr").each(function(){var b=a(this).children("td");if(0<b.length){var e=[];b.each(function(){e.push(a(this).html())});c.push(e)}});J[x-1]?J[x-1].toString()!=c.toString()&&(J[x]=c,x++,J=J.slice(0,x)):(J[x]=c,x++);return c},Na=function(c){var b=0;
q.find("tbody#the-list > tr").each(function(){var e=a(this).children("td");if(0<e.length){var d=0;e.each(function(){a(this).html(c[b][d]);var e=a(this).find(".yith-wcbep-editable-select"),h=a(this).find(".yith-wcbep-editable-checkbox"),q;0<e.length?(q=a(this).find(".yith-wcbep-hidden-select-value").val(),e.val(q)):0<h.length&&(q=a(this).find(".yith-wcbep-hidden-checkbox-value").val(),h.prop("checked",1==q));d++})}b++});va()},Ab=function(){var c=[];q.children("thead").children("tr").children("th").each(function(){c.push(a(this).attr("id"))});
return c},ia=function(){var c=0,b=[];q.find("tbody#the-list > tr").each(function(){0<a(this).find("th.check-column input:checked").length&&b.push(c);c++});return b},Oa=function(){E.find("input.is_resetable, textarea.is_resetable").each(function(){a(this).val("")});E.find("select.is_resetable").each(function(){a(this).hasClass("chosen")||(a(this).prop("selectedIndex",0),a(this).trigger("change"))});E.find("select.is_resetable").each(function(){a(this).prop("selectedIndex",0);a(this).trigger("change")});
E.find(".yith-wcbep-image-bulk-reset").trigger("click");var c=extra_bulk.chosen;for(i in c){var b=a("#yith-wcbep-"+c[i]+"-bulk-chosen");b.prop("selectedIndex",-1);b.select2()}Y.prop("selectedIndex",-1);Y.select2();pa.each(function(){a(this).prop("selectedIndex",-1);a(this).select2()})},Cb=function(){ea.find("input.is_resetable").each(function(){a(this).val("")});ea.find("select.is_resetable").each(function(){a(this).prop("selectedIndex",0)});ea.find(".chosen.is_resetable").each(function(){a(this).val("").trigger("change")})},
Db=function(){if(U)for(var c in w){var b=w[c],e;for(e in b)if(a(b[e])[0]==U[0]&&"undefined"!=typeof w[parseInt(c)+1]){a(w[parseInt(c)+1][e]).trigger("click");v.selectText();return}}},Pa=function(){var c=[];I.find("input[type=checkbox]").each(function(){var b=a(this).data("cols-id");a(this).is(":checked")?q.find(".column-"+b).show():(q.find(".column-"+b).hide(),c.push(b))});Qa||a.ajax({type:"POST",data:{hidden_cols:c,action:"yith_wcbep_save_default_hidden_cols"},url:ajaxurl,success:function(a){}});
Ka()};a.fn.extend({hasClasses:function(c,b){if("OR"==b){for(var e in c)if(a(this).hasClass(c[e]))return!0;return!1}var d=!0;for(e in c)a(this).hasClass(c[e])||(d=!1);return d}});a.fn.selectText=function(){var a=this[0];if(document.body.createTextRange){var b=document.body.createTextRange();b.moveToElementText(a);b.select()}else if(window.getSelection){var e=window.getSelection(),b=document.createRange();b.selectNodeContents(a);e.removeAllRanges();e.addRange(b)}};xb.on("click",function(){a(this).parent().fadeOut()});
a(".yith-wcbep-datepicker").datepicker({dateFormat:"yy/mm/dd"});E.draggable({stop:function(){a(this).css({height:"auto"})}});I.draggable();T.draggable();q.css({height:"auto",width:yb});da.resizable({minHeight:20,maxHeight:20,minWidth:100,handles:"e",resize:function(){var c=ca*a(this).width()/100;q.css({height:"auto",width:c})}});a("#yith-wcbep-bulk-editor-container").tabs();ea.find(".chosen").select2();Ra.select2({width:"100%"});pa.select2();v.offset([0,0]);sb.on("click",function(){var a='<tr class="yith-wcbep-table-new-product">',
b;for(b in h){var e=h[b]+" column-"+h[b],d="";switch(h[b]){case "cb":a+='<th scope="row" class="check-column"></th>';break;case "ID":d="NEW";break;case "title":d="New Product";break;case "image":d='<img src=""><input class="yith-wcbep-hidden-image-value" value="" type="hidden">';break;case "image_gallery":d='<div class="yith-wcbep-table-image-gallery"></div>';break;case "categories":d='<div class="yith-wcbep-select-values"></div> <input class="yith-wcbep-select-selected" value="[]" type="hidden">';
break;case "stock_status":case "manage_stock":case "sold_individually":case "featured":case "virtual":case "downloadable":case "enable_reviews":d='<input class="yith-wcbep-editable-checkbox" type="checkbox"> <input class="yith-wcbep-hidden-checkbox-value" value="0" type="hidden">';break;case "tax_status":case "tax_class":case "allow_backorders":case "shipping_class":case "status":case "visibility":case "download_type":case "prod_type":d='<div class="not_editable_for_new"></div><input type="hidden" class="yith-wcbep-hidden-checkbox-value" value="">'}"attr_"==
h[b].substring(0,5)&&(d='<div class="not_editable_for_new"></div>');"cb"!=h[b]&&(a+='<td class="'+e+'">'+d+"</td>")}a+="</tr>";q.find("tbody").prepend(a);Pa();Ma()});Ha.on("click",function(c){c.stopPropagation();A=ia();if(!(1>A.length))if("yes"!=a(this).data("confirm"))a(this).val(ajax_object.delete_confirm_txt.replace("%s",A.length)),a(this).data("confirm","yes"),a(this).addClass("yith-wcbep-confirm-btn");else{a(this).val(ajax_object.delete_txt);a(this).data("confirm","no");a(this).removeClass("yith-wcbep-confirm-btn");
q.block(qa);Z.prop("disabled",!0);X.prop("disabled",!0);c=Bb();var b=[],e;for(e in A)b.push(c[A[e]]);a.ajax({type:"POST",data:{products_to_delete:b,action:"yith_wcbep_bulk_delete_products"},url:ajaxurl,success:function(b){N.html("<p>"+b+"</p>");b=a('<button type="button" class="notice-dismiss" />');b.appendTo(N);N.fadeIn();b.on("click",function(){N.fadeOut()});ka.trigger("click")}})}});tb.on("click",function(){A=ia();if(!(1>A.length)){var a=ha(),b=[],e;for(e in A)b.push(a[A[e]]);a=JSON.stringify([h,
b]);b=document.createElement("a");b.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a));b.setAttribute("download","yith_exported_products.txt");b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b)}});vb.on("click",function(){A=ia();if(!(1>A.length)){var a=ha(),b=[],e;for(e in A)b.push(parseInt(a[A[e]][h.indexOf("ID")]));a=JSON.stringify(b);wb.val(a);ub.submit()}});qb.on("click",function(){1<x&&(x--,Na(J[x-1]))});rb.on("click",function(){J[x]&&
(Na(J[x]),x++)});Sa.on("click",function(){M(d,O);C(!0)});Ta.on("click",function(){C(!0)});Ya.on("click",function(){M(d,H);C(!0)});Xa.on("click",function(){C(!0)});Za.on("click",function(){var a=wp.media({title:"Upload Image",multiple:!0}).open().on("select",function(b){var e="";a.state().get("selection").map(function(a){var b=a.toJSON().url;e+='<li class="image"><span class="delete">x</span><img data-image-id="'+a.id+'" src="'+b+'"></li>'});H.find("#yith-wcbep-custom-input-gallery-container ul").append(e);
Ia()})});Ua.on("click",function(){M(d,D);C(!0)});Wa.on("click",function(){D.find("img").attr("src","");D.find(".yith-wcbep-hidden-image-value").val("")});Va.on("click",function(){C(!0)});D.on("click",".yith-wcbep-custom-input-image-container",function(c){c.preventDefault();var b=a(this).find("img").first(),e=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(a){a=e.state().get("selection").first();var c=a.toJSON().url;b.attr("src",c);D.find(".yith-wcbep-hidden-image-value").val(a.id)})});
a("#yith-wcbep-image-bulk-choose-image").on("click",function(c){c=a(this).closest(".yith-wcbep-bulk-form-content-col");var b=c.find("#yith-wcbep-image-bulk-preview"),e=c.find("#yith-wcbep-image-bulk-value"),d=c.find("#yith-wcbep-image-bulk-src"),h=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(c){c=h.state().get("selection").first();var q=c.toJSON().url,m=a("<img />").attr("src",q),k=a('<span class="yith-wcbep-image-bulk-reset dashicons dashicons-no-alt"></span>');b.html("").append(m).append(k);
e.val(c.id);d.val(q)})});a(document).on("click",".yith-wcbep-image-bulk-reset",function(){var c=a(this).closest(".yith-wcbep-bulk-form-content-col"),b=c.find("#yith-wcbep-image-bulk-preview"),d=c.find("#yith-wcbep-image-bulk-value"),c=c.find("#yith-wcbep-image-bulk-src");d.val("");b.html("");c.val("")});bb.on("click",function(){R.append(xa.html());Ja()});ab.on("click",function(){M(d,L);C(!0)});$a.on("click",function(){C(!0)});E.find("select").on("change",function(){var c=a(this);"rep"==c.val()?c.parent().find(".yith_wcbep_no_display").show():
c.parent().find(".yith_wcbep_no_display").hide()});wa.on("click",function(){C(!0);I.fadeOut();Ha.val(ajax_object.delete_txt).data("confirm","no").removeClass("yith-wcbep-confirm-btn")});v.on("click",function(a){a.stopPropagation()}).keypress(function(a){13==a.which&&(C(!0),a.stopPropagation(),setTimeout(Db,0))});ka.on("click",function(){var c=[];ja.each(function(){var b=a(this).val();"undefined"!=typeof b&&b&&c.push([a(this).data("taxonomy-name"),a(this).val()])});var b={f_title_select:ya.val(),f_title_value:P.val(),
f_sku_select:za.val(),f_sku_value:Q.val(),f_categories:la.val(),f_tags:fa.val(),f_attributes:c,f_reg_price_select:Ca.val(),f_reg_price_value:ma.val(),f_sale_price_select:Da.val(),f_sale_price_value:na.val(),f_weight_select:Ea.val(),f_weight_value:oa.val(),f_per_page:cb.val(),f_product_type:db.val(),f_show_variations:Fa[0].checked?"yes":"no"};list.update(b)});X.on("click",function(){C(!0);var c=[];q.find("tbody#the-list th.check-column > input:checked").each(function(){c.push(a(this).val())});if(1>
c.length)alert(ajax_object.no_product_selected);else{var b=a(window).scrollTop()+50;E.css({top:b});E.fadeIn();a("#wpwrap").block(zb);A=ia()}});a("#yith-wcbep-bulk-cancel").add(".yith-wcbep-close-bulk-editor").on("click",function(){E.fadeOut();Oa();a("#wpwrap").unblock()});E.keypress(function(a){13==a.which&&Ga.trigger("click")});E.find("textarea").keypress(function(a){13==a.which&&a.stopPropagation()});Ga.on("click",function(){var c=gb.val(),b=null!=Y.val()?Y.val():"",d=[],q=[],u=hb.val(),t=ib.val(),
x=jb.val();Y.find("option").each(function(){d.push(a(this).val());q.push(a(this).text())});for(var m in A){var k=A[m];if(-1<h.indexOf("categories")){var p=a(w[k][h.indexOf("categories")]),g=a.parseJSON(p.find(".yith-wcbep-select-selected").val()),f="",r=[],n;for(n in g)r.push(g[n].toString());g=r.slice();switch(c){case "new":f=b;break;case "add":f=g.slice();for(n in b)-1==f.indexOf(b[n])&&f.push(b[n]);break;case "rem":for(n in f=g.slice(),b)m=f.indexOf(b[n]),-1<m&&f.splice(m,1)}r=f;p.find(".yith-wcbep-select-selected").val("["+
r+"]");var l="";for(n in r)l+=q[d.indexOf(r[n])],n<r.length-1&&(l+=", ");p.find(".yith-wcbep-select-values").html(l)}g=extra_bulk.chosen;for(n in g)if(-1<h.indexOf(g[n])){var p=a(w[k][h.indexOf(g[n])]),r=a.parseJSON(p.find(".yith-wcbep-select-selected").val()),l="",y=[],z=a("#yith-wcbep-"+g[n]+"-bulk-select").val(),f=a("#yith-wcbep-"+g[n]+"-bulk-chosen"),v=f.val();for(n in r)r[n]&&y.push(r[n].toString());r=y.slice();switch(z){case "new":l=v;break;case "add":l=r.slice();for(n in v)-1==l.indexOf(v[n])&&
l.push(v[n]);break;case "rem":for(n in l=r.slice(),v)m=l.indexOf(v[n]),-1<m&&l.splice(m,1)}r=l;p.find(".yith-wcbep-select-selected").val("["+r+"]");l="";for(n in r)y=f.find("option[value="+r[n]+"]").text(),l+=y,n<r.length-1&&(l+=", ");p.find(".yith-wcbep-select-values").html(l)}if(-1<h.indexOf("tags")&&(p=a(w[k][h.indexOf("tags")]),g=V[k][h.indexOf("tags")],f="",(""!=t||"del"==u)&&1>p.find(".not_editable").length)){switch(u){case "new":f=t;break;case "pre":f=t+g;break;case "app":f=g+t;break;case "rep":f=
g.replace(new RegExp(t,"g"),x);break;case "del":f=""}p.html(f)}y="weight height width length stock_quantity download_limit download_expiry regular_price sale_price".split(" ");for(n in y)if(-1<h.indexOf(y[n])&&(p=a(w[k][h.indexOf(y[n])]),l=parseFloat(p.html()),f="",g=a("#yith-wcbep-"+y[n]+"-bulk-select").val(),r=a("#yith-wcbep-"+y[n]+"-bulk-value").val(),(!isNaN(r)&&""!=r||"del"==g)&&1>p.find(".not_editable").length)){switch(g){case "new":f=parseFloat(r);break;case "inc":l=isNaN(l)?0:l;f=l+parseFloat(r);
break;case "dec":f=0<l?l-parseFloat(r):"";break;case "incp":f=0<l?l+l*parseFloat(r)/100:"";break;case "decp":f=0<l?l-l*parseFloat(r)/100:"";break;case "decfr":g=a(w[k][h.indexOf("regular_price")]);l=parseFloat(g.html());isNaN(l)||""==l||(f=l-parseFloat(r));break;case "decpfr":g=a(w[k][h.indexOf("regular_price")]);l=parseFloat(g.html());isNaN(l)||""==l||(f=l-l*parseFloat(r)/100);break;case "del":f=""}""!=f&&(0>f||isNaN(f))&&(f=0);p.html(f)}z=["purchase_note","description","shortdesc"];for(n in z)if(-1<
h.indexOf(z[n])&&(p=a(w[k][h.indexOf(z[n])]),l=p.html(),f="",g=a("#yith-wcbep-"+z[n]+"-bulk-select").val(),r=a("#yith-wcbep-"+z[n]+"-bulk-value").val(),y=a("#yith-wcbep-"+z[n]+"-bulk-replace").val(),""!=r&&1>p.find(".not_editable").length)){switch(g){case "new":f=r;break;case "pre":f=r+l;break;case "app":f=l+r;break;case "rep":f=l.replace(new RegExp(r,"g"),y)}p.html(f)}f="manage_stock stock_status sold_individually featured virtual downloadable enable_reviews".split(" ");for(n in f)if(-1<h.indexOf(f[n])&&
(p=a(w[k][h.indexOf(f[n])]),g=a("#yith-wcbep-"+f[n]+"-bulk-select").val(),1>p.find(".not_editable").length))switch(g){case "yes":p.find(".yith-wcbep-editable-checkbox").prop("checked",!1).trigger("click");break;case "no":p.find(".yith-wcbep-editable-checkbox").prop("checked",!0).trigger("click")}f="tax_status tax_class allow_backorders shipping_class status visibility download_type prod_type".split(" ");f=f.concat(extra_bulk.select);for(n in f)-1<h.indexOf(f[n])&&(p=a(w[k][h.indexOf(f[n])]),g=a("#yith-wcbep-"+
f[n]+"-bulk-select").val(),"skip"!=g&&1>p.find(".not_editable").length&&p.find(".yith-wcbep-editable-select").val(g).trigger("change"));z="button_text product_url slug up_sells cross_sells title sku sale_price_from sale_price_to date".split(" ");z=z.concat(extra_bulk.text);for(n in z)if(-1<h.indexOf(z[n])&&(p=a(w[k][h.indexOf(z[n])]),l=p.html(),f="",g=a("#yith-wcbep-"+z[n]+"-bulk-select").val(),r=a("#yith-wcbep-"+z[n]+"-bulk-value").val(),y=a("#yith-wcbep-"+z[n]+"-bulk-replace").val(),(""!=r||"del"==
g)&&1>p.find(".not_editable").length)){switch(g){case "new":f=r;break;case "pre":f=r+l;break;case "app":f=l+r;break;case "rep":f=l.replace(new RegExp(r,"g"),y);break;case "del":f=""}p.html(f)}if(-1<h.indexOf("image")&&(p=a(w[k][h.indexOf("image")]),l=p.html(),f="",g=a("#yith-wcbep-image-bulk-select").val(),r=a("#yith-wcbep-image-bulk-value").val(),y=a("#yith-wcbep-image-bulk-src").val(),(""!=r||"del"==g)&&1>p.find(".not_editable").length)){switch(g){case "new":f=r;break;case "del":y=f=""}p.find(".yith-wcbep-hidden-image-value").val(f);
p.find("img").attr("src",y)}pa.each(function(){var b=a(this);if(-1<h.indexOf("attr_"+b.data("taxonomy-name"))){var c=a(w[k][h.indexOf("attr_"+b.data("taxonomy-name"))]),d=b.parent().parent().find(".yith-wcbep-attributes-bulk-select").val(),e="",f=a.parseJSON(c.find(".yith-wcbep-select-selected").val()),g=b.val(),n=[],m=[],l;for(l in f)f[l]=""+f[l];b.find("option").each(function(){m.push(a(this).val());n.push(a(this).text())});switch(d){case "new":e=g;break;case "add":e=f.slice();for(l in g)-1==e.indexOf(g[l])&&
e.push(g[l]);break;case "rem":for(l in e=f.slice(),g)b=e.indexOf(g[l]),-1<b&&e.splice(b,1)}0>c.find(".yith-wcbep-attr-is-visible").val()&&0<e.length&&(e=[e[0]]);c.find(".yith-wcbep-select-selected").val("["+e+"]");g="";for(l in e)g+=n[m.indexOf(e[l])],l<e.length-1&&(g+=", ");c.find(".yith-wcbep-select-values").html(g)}})}E.fadeOut();Oa();va(!0);a("#wpwrap").unblock()});eb.on("click",function(){Cb()});fb.on("click",function(){var c=[],b=[];ja.each(function(b,d){var e=a(d),f=null!=e.val()?e.val():null,
g;for(g in f)f[g]=parseInt(f[g]);c.push([e.data("taxonomy-name"),f])});W=ha();var d=null!=la.val()?la.val().map(parseInt):null,u=[],v;for(v in fa.val()){var t=fa.find("option[value="+fa.val()[v]+"]").html();u.push(t)}for(var w in W){var t=W[w],m=!0;if(0<P.val().length){var k=t[h.indexOf("title")];1>k.length&&(m=!1);switch(ya.val()){case "cont":0>k.indexOf(P.val())&&(m=!1);break;case "notcont":-1<k.indexOf(P.val())&&(m=!1);break;case "starts":0!=k.indexOf(P.val())&&(m=!1);break;case "ends":k.indexOf(P.val())!=
k.length-P.val().length&&(m=!1)}}if(0<Q.val().length)switch(k=t[h.indexOf("sku")],1>k.length&&(m=!1),za.val()){case "cont":0>k.indexOf(Q.val())&&(m=!1);break;case "notcont":-1<k.indexOf(Q.val())&&(m=!1);break;case "starts":0!=k.indexOf(Q.val())&&(m=!1);break;case "ends":k.indexOf(Q.val())!=k.length-Q.val().length&&(m=!1)}if(null!=d&&0<d.length){k=a.parseJSON(t[h.indexOf("categories")]);1>k.length&&(m=!1);for(var p in d)0>k.indexOf(d[p])&&(m=!1)}if(null!=u&&0<u.length)for(p in k=t[h.indexOf("tags")].split(", "),
1>k.length&&(m=!1),u)0>k.indexOf(u[p])&&(m=!1);for(p in c)if(null!=c[p][1]&&0<c[p][1].length){k=t[h.indexOf("attr_"+c[p][0])][2];1>k.length&&(m=!1);var g=c[p][1];for(v in g)0>k.indexOf(g[v])&&(m=!1)}if(0<ma.val().length)switch(g=parseFloat(t[h.indexOf("regular_price")]),k=parseFloat(ma.val()),Ca.val()){case "mag":g>k||(m=!1);break;case "min":g<k||(m=!1);break;case "ug":g!=k&&(m=!1);break;case "magug":g>=k||(m=!1);break;case "minug":g<=k||(m=!1)}if(0<na.val().length)switch(g=parseFloat(t[h.indexOf("sale_price")]),
k=parseFloat(na.val()),Da.val()){case "mag":g>k||(m=!1);break;case "min":g<k||(m=!1);break;case "ug":g!=k&&(m=!1);break;case "magug":g>=k||(m=!1);break;case "minug":g<=k||(m=!1)}if(0<oa.val().length)switch(k=parseFloat(t[h.indexOf("weight")]),g=parseFloat(oa.val()),Ea.val()){case "mag":k>g||(m=!1);break;case "min":k<g||(m=!1);break;case "ug":k!=g&&(m=!1);break;case "magug":k>=g||(m=!1);break;case "minug":k<=g||(m=!1)}"no"==(Fa[0].checked?"yes":"no")&&a(t[h.indexOf("prod_type")]).is(".not_editable")&&
(m=!1);m&&b.push(parseInt(w))}var f=0;q.find("tbody#the-list th.check-column > input").each(function(){-1<b.indexOf(f)?a(this).attr("checked",!0):a(this).attr("checked",!1);f++})});Z.on("click",function(){va();if(0<aa.length){q.block(qa);Z.prop("disabled",!0);X.prop("disabled",!0);W=ha();var c=[],b=[],d;for(d in aa){var u=aa[d];c.push(W[u]);b.push(ua[u])}for(var v in b)for(ic in d=b[v],d)0==d[ic]&&2!=ic&&(c[v][ic]=null);var t=c.length,w=t,m=0,k=a("#yith-wcbep-percentual-container");k.html('<span class="yith-wcbep-percentual" style="width:'+
m+'%;">'+m+"%</span>");var p=k.find("span.yith-wcbep-percentual");k.fadeIn();var g=c.length,f=function(d){d<g?a.ajax({type:"POST",data:{matrix_keys:h,matrix_modify:[c[d]],edited_matrix:[b[d]],action:"yith_wcbep_bulk_edit_products"},url:ajaxurl,success:function(a){},complete:function(a){t--;m=parseInt(100*(w-t)/w);p.html(m+"%");p.animate({width:m+"%"});f(++d)}}):(ka.trigger("click"),k.delay(1500).fadeOut())};0<g&&f(0)}});kb.on("click",function(c){c.stopPropagation();C(!0);c=a(window).scrollTop()+100;
I.css({top:c});I.fadeIn()});I.on("click","input[type=checkbox]",function(a){Pa()});lb.on("click",function(){I.find("input").attr("checked",!0);I.find("input").first().attr("checked",!1).trigger("click")});mb.on("click",function(){I.find("input").attr("checked",!1);I.find("input").first().attr("checked",!0).trigger("click")});ba.on("click",function(a){a=ba.offset().top+ba.outerHeight()+20;var b=ba.offset().left+ba.outerWidth()/2-200;T.fadeIn("fast");T.offset({top:a,left:b})});nb.on("click",function(){ga.val("");
T.fadeOut("fast")});pb.on("click",function(){var a=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var b=a.state().get("selection").first().toJSON().url;ga.val(b)})});ob.on("click",function(){a("#yith-wcbep-importer-form");var c={file_url:ga.val(),action:"yith_wcbep_import"};a.ajax({type:"POST",data:c,url:ajaxurl,success:function(b){0<b.length&&(N.html("<p>"+b+"</p>"),b=a('<button type="button" class="notice-dismiss" />'),b.appendTo(N),N.fadeIn(),b.on("click",function(){N.fadeOut()}));
T.unblock();T.fadeOut("fast");ga.val("")}})});list={f_data:{paged:"1",order:"desc",orderby:"ID",f_show_variations:"no"},init:function(){var c;Ma();a(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(b){b.preventDefault();if(!(1<x)){b=this.search.substring(1);var c=[];ja.each(function(){c.push([a(this).data("taxonomy-name"),a(this).val()])});b=a.extend(list.f_data,{paged:list.__query(b,"paged")||"1",order:list.__query(b,"order")||"desc",orderby:list.__query(b,
"orderby")||"ID"});list.update(b)}});a("input[name=paged]").on("change",function(b){13==b.which&&b.preventDefault();b=a(".tablenav-pages a")[0].search.substring(1);var d=a("input[name=paged]"),h=a.extend(list.f_data,{paged:parseInt(d.val())||"1",order:list.__query(b,"order")||"desc",orderby:list.__query(b,"orderby")||"ID"});window.clearTimeout(c);c=window.setTimeout(function(){list.update(h)},500)})},update:function(c){q.block(qa);Z.prop("disabled",!0);X.prop("disabled",!0);list.f_data=c;Aa.length&&
(c=a.extend({f_brands:Aa.val()},c));if(Ba.length){var b=[];Ba.each(function(){var c=a(this).val();c&&(c={taxonomy:a(this).data("taxonomy"),values:c},b.push(c))});c=a.extend({f_custom_taxonomies:b},c)}a.ajax({url:ajaxurl,data:a.extend({_ajax_yith_wcbep_list_nonce:a("#_ajax_yith_wcbep_list_nonce").val(),action:"_ajax_fetch_yith_wcbep_list"},c),success:function(b){b=a.parseJSON(b);b.rows.length&&a("#the-list").html(b.rows);b.column_headers.length&&a("thead tr, tfoot tr").html(b.column_headers);b.pagination.bottom.length&&
a(".tablenav.top .tablenav-pages").html(a(b.pagination.top).html());b.pagination.top.length&&a(".tablenav.bottom .tablenav-pages").html(a(b.pagination.bottom).html());list.init();q.unblock();Z.prop("disabled",!1);X.prop("disabled",!1);La()}})},__query:function(a,b){for(var d=a.split("&"),h=0;h<d.length;h++){var q=d[h].split("=");if(q[0]==b)return q[1]}return!1}};list.init()});
