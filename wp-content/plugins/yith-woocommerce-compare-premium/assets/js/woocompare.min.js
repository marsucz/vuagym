jQuery(document).ready(function(o){"use strict";function e(o,e){o=escape(o),e=escape(e);var t=document.location.search,a=o+"="+e,r=new RegExp("(&|\\?)"+o+"=[^&]*");return t=t.replace(r,"$1"+a),RegExp.$1||(t+=(t.length>0?"&":"?")+a),t}function t(o){for(var e=o+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var r=t[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return decodeURIComponent(r.substring(e.length,r.length))}return""}function a(o){if(void 0!==o.data("hide")){var e=t(yith_woocompare.cookie_name);(e?JSON.parse(e):"").length?o.closest(".yith-woocompare-widget").show():o.closest(".yith-woocompare-widget").hide()}}function r(e){var t=o(".yith-woocompare-widget ul.products-list"),r=t.data("lang");if(t.length){if(e)t.html(e);else{var i={action:yith_woocompare.actionreload,context:"frontend",lang:r};void 0!==o.fn.block&&t.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),o.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionreload),data:i,success:function(e){void 0!==o.fn.block&&t.unblock(),t.html(e)}})}a(t),o(document).trigger("yith_woocompare_widget_updated")}}o(document).on("click","a.compare:not(.added)",function(e){e.preventDefault();var t,a=o(this),i=o(".yith-woocompare-widget ul.products-list"),c=a.parents("#yith-woocompare-related"),n=!!c.length,p=n?c.data("iframe"):"no";t={action:yith_woocompare.actionadd,id:a.data("product_id"),context:"frontend",is_related:n,iframe:p},void 0!==o.fn.block&&(a.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),i.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}})),o.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionadd),data:t,dataType:n?"html":"json",success:function(e){n?(o("#yith-woocompare").replaceWith(o(e).filter("#yith-woocompare")),r(!1),o(document).trigger("yith_woocompare_page_refreshed",[!1])):(a.addClass("added").attr("href",e.table_url).text(yith_woocompare.is_page?yith_woocompare.view_label:yith_woocompare.added_label),r(e.widget_table),"yes"!=yith_woocompare.auto_open||e.only_one||yith_woocompare.is_page||o("body").trigger("yith_woocompare_open_popup",{response:e.table_url,button:a})),void 0!==o.fn.block&&(a.unblock(),i.unblock())}})}),yith_woocompare.is_page||o(document).on("click","a.compare.added",function(e){e.preventDefault();var t=this.href;void 0!==t&&o("body").trigger("yith_woocompare_open_popup",{response:t,button:o(this)})}),o("body").on("yith_woocompare_open_popup",function(e,t){var a=t.response;t.button;o(window).width()>=768?(o.colorbox({href:a,iframe:!0,width:"80%",height:"80%",fixed:!0,className:"yith_woocompare_colorbox",close:yith_woocompare.close_label,onClosed:function(){yith_woocompare.im_in_page?location.reload():r(!1)},onComplete:function(){i(),o.dataTableFunction()}}),o(window).resize(function(){o.colorbox.resize({width:"90%",height:"90%"})})):window.location=yith_woocompare.page_url}),o(document).on("click",".compare-list .remove a, a.yith_woocompare_clear",function(e){e.preventDefault();var t=o(this),a=t.data("product_id"),i={action:yith_woocompare.actionremove,id:a,iframe:t.data("iframe"),context:"frontend"};void 0!==o.fn.block&&t.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),o.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionremove),data:i,dataType:"html",success:function(e){var t=o(e).filter("#yith-woocompare");o("#yith-woocompare").replaceWith(t),o("all"==a?".compare.added":'.compare[data-product_id="'+a+'"]',window.parent.document).removeClass("added").html(yith_woocompare.button_text),r(!1),o(document).trigger("yith_woocompare_product_removed",[""])}})}),o(".yith-woocompare-open a, a.yith-woocompare-open").on("click",function(t){t.preventDefault(),o("body").trigger("yith_woocompare_open_popup",{response:e("action",yith_woocompare.actionview)+"&iframe=1"})}),o(".yith-woocompare-widget").on("click","a.compare-widget",function(e){yith_woocompare.is_page||(e.preventDefault(),o("body").trigger("yith_woocompare_open_popup",{response:o(this).attr("href")}))}).on("click","li a.remove, a.clear-all",function(e){e.preventDefault();var t=o(".yith-woocompare-widget .products-list").data("lang"),a=o(this),i=a.data("product_id"),c={action:yith_woocompare.actionremove,id:i,context:"frontend",responseType:"product_list",lang:t},n=a.parents(".yith-woocompare-widget").find("ul.products-list");void 0!==o.fn.block&&n.block({message:null,overlayCSS:{background:"#fff url("+yith_woocompare.loader+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}}),o.ajax({type:"post",url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionremove),data:c,dataType:"html",success:function(e){var t=o("#yith-woocompare");t.length&&o.get(window.location,function(e){var a=o(e).find("#yith-woocompare");t.replaceWith(a),o(document).trigger("yith_woocompare_page_refreshed",[a])}),r(e),void 0!==o.fn.block&&n.unblock(),"all"==i?o(".compare.added").removeClass("added").html(yith_woocompare.button_text):o('.compare[data-product_id="'+i+'"]').removeClass("added").html(yith_woocompare.button_text)}})}),o(document).on("click","#yith-woocompare-cat-nav li > a",function(e){e.preventDefault();var t=o(this),a=t.closest("#yith-woocompare"),r=t.data("cat_id"),i=t.closest("#yith-woocompare-cat-nav > ul"),c=i.data("product_ids"),n=i.data("iframe");o.ajax({url:yith_woocompare.ajaxurl.toString().replace("%%endpoint%%",yith_woocompare.actionfilter),data:{action:yith_woocompare.actionfilter,yith_compare_cat:r,yith_compare_prod:c,context:"frontend",iframe:n},dataType:"html",success:function(e){var t=o(e).filter("#yith-woocompare");a.replaceWith(t),o(document).trigger("yith_woocompare_page_refreshed",[t])}})});var i=function(){if(void 0!==o.fn.owlCarousel){var e=o("#yith-woocompare-related"),t=e.find(".related-products"),a=e.find(".related-slider-nav");if(!e.length)return;t.owlCarousel({autoplay:yith_woocompare.autoplay_related,autoplayHoverPause:!0,loop:!0,margin:15,responsiveClass:!0,responsive:{0:{items:2},480:{items:3},768:{items:yith_woocompare.num_related}}}),a.length&&(a.find(".related-slider-nav-prev").click(function(){t.trigger("prev.owl.carousel")}),a.find(".related-slider-nav-next").click(function(){t.trigger("next.owl.carousel")}))}};i(),o(document).on("yith_woocompare_product_removed yith_woocompare_page_refreshed",i),o.dataTableFunction=function(e){var t,a=e&&e.length?e:o(document).find("#yith-woocompare table.compare-list");a.length&&void 0!==o.fn.DataTable&&void 0!==o.fn.imagesLoaded&&a.each(function(){var e=o(this);e.imagesLoaded(function(){t=e.DataTable({info:!1,scrollX:!0,scrollCollapse:!0,paging:!1,ordering:!1,searching:!1,autoWidth:!1,destroy:!0,fixedColumns:{leftColumns:yith_woocompare.fixedcolumns}})})})},o.dataTableFunction(!1),o(document).on("yith_woocompare_product_removed yith_woocompare_page_refreshed",function(e,t){var a=!!t&&o(t).find("table.compare-list");o.dataTableFunction(a)}),o("body").on("added_to_cart",function(e,t,a,r){o(r).closest("table.compare-list").length&&r.hide()}),r()});